(this.webpackJsonpconcentration=this.webpackJsonpconcentration||[]).push([[0],{16:function(e,t,n){e.exports=n(32)},21:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var a=n(5),r=n(2),i=n.n(r),c=n(13),s=n.n(c),o=(n(21),n(14)),l=n(10);var u=function e(t,n,a){Object(l.a)(this,e),this.val=t,this.hasBeenRevealed=n,this.isTurned=a},m=function(){function e(t,n,a){Object(l.a)(this,e),this.nRows=n,this.nCols=a,this.cards=null===t?this._dealCards(n,a):t,this.finalTime=null}return Object(o.a)(e,[{key:"_dealCards",value:function(e,t){for(var n=e*t,a=[],r=0;r<n/2;r++)a=a.concat([r,r]);a=function(e){for(var t,n,a=e.length;0!==a;)n=Math.floor(Math.random()*a),t=e[a-=1],e[a]=e[n],e[n]=t;return e}(a);for(var i=[],c=0;c<e;c++){i.push([]);for(var s=0;s<t;s++)i[i.length-1].push(new u(a[c*t+s],!1,!1))}return i}},{key:"reset",value:function(){this.cards.forEach((function(e,t){e.forEach((function(e,t){e.isTurned=!1}))}))}},{key:"countTurned",value:function(){var e=0;return this.cards.forEach((function(t,n){t.forEach((function(t,n){e+=Number(t.isTurned)}))})),e}},{key:"markRevealed",value:function(){if(2===this.countTurned()){var e=[];this.cards.forEach((function(t,n){t.forEach((function(t,n){t.isTurned&&e.push(t)}))})),e[0].val===e[1].val&&(e[0].hasBeenRevealed=!0,e[1].hasBeenRevealed=!0)}}},{key:"checkGameOver",value:function(e){for(var t=0;t<this.nRows;t++)for(var n=0;n<this.nCols;n++)if(!this.cards[t][n].hasBeenRevealed)return!1;return null===this.finalTime&&(this.finalTime=e),!0}}]),e}(),d=function(e){var t=e.dc,n=e.row,a=e.col,r=e.setDC,c=e.color,s=e.fontSize,o=e.backgroundColorIsTurned,l=t.cards[n][a],u=l.hasBeenRevealed,m="",d="red";return l.isTurned&&(m=l.val,d=o),i.a.createElement("div",null," ",!u&&i.a.createElement("button",{style:{color:"".concat(c),fontSize:"".concat(s,"px"),backgroundColor:"".concat(d)},onClick:function(){r((function(e){var t=Object.assign(Object.create(Object.getPrototypeOf(e)),e);return 2===t.countTurned()&&t.reset(),t.cards[n][a].isTurned||(t.cards[n][a].isTurned=!t.cards[n][a].isTurned),t.markRevealed(),t}))}},m))},f=n(8),v={apiKey:"AIzaSyDTBOhkfQUnZAIlWlkQa1dbf8338RXIhCI",authDomain:"concentration-6830e.firebaseapp.com",databaseURL:"https://concentration-6830e.firebaseio.com",projectId:"concentration-6830e",storageBucket:"concentration-6830e.appspot.com",messagingSenderId:"568314381412",appId:"1:568314381412:web:ca8c364c9a189cf5f6cb71",measurementId:"G-NJLRNG3GVZ"},h=function(e){var t,n=e.nCards,c=e.userName,s=e.finalTime,o=e.nEntriesToDisplay,l=Object(r.useState)(null),u=Object(a.a)(l,2),m=u[0],d=u[1];if(Object(r.useEffect)((function(){console.log("I AM INSIDE"),f.apps.length||f.initializeApp(v);var e=f.database().ref("highscoresNew").child(String(n)),t={};t.score=s,t.userName=c,t.timeStamp=(new Date).getTime(),e.push(t),e.once("value").then((function(e){return d(e.val())}))}),[s,n,c]),console.log("RENDER LEADERBOARD"),null!==m){var h=Object.keys(m).map((function(e){return[m[e].userName,m[e].score]}));h.sort((function(e,t){return-(t[1]-e[1])})),t=(h=h.slice(0,o)).map((function(e,t){return i.a.createElement("li",{key:t},e[0],": ",e[1])}))}else t=i.a.createElement("h1",null,"Loading leaderboard.");return i.a.createElement("div",null,t)},p=function(e){var t=e.userName,n=e.finalTime,a=e.setTime,r=e.nCards;return a(0),i.a.createElement("div",null,i.a.createElement("h1",null,"Congratz ",t,"! Finished in ",n," seconds"),i.a.createElement(h,{nCards:r,userName:t,finalTime:n,nEntriesToDisplay:20}))},b=function(e){var t=e.dc,n=e.setDC,a=e.nRows,c=e.nCols,s=e.userName,o=e.gameInitialized,l=e.setGameInitialized,u=e.time,f=e.setTime,v=a*c;Object(r.useEffect)((function(){var e=setInterval((function(){return f((function(e){return e+1}))}),1e3);return function(){clearInterval(e),f(0)}}),[]),o&&null!==t||(t=new m(null,a,c),n(t),l(!0));for(var h=[],b=0;b<a;b++)for(var E=0;E<c;E++)h.push([t,b,E]);var N=h.map((function(e,t){return i.a.createElement("div",{className:"gridItem",key:t},i.a.createElement(d,{dc:e[0],row:e[1],col:e[2],setDC:n,color:"black",fontSize:20,backgroundColorIsTurned:"green"}))}));return i.a.createElement("div",null,t.checkGameOver(u)?i.a.createElement(p,{userName:s,finalTime:t.finalTime,setTime:f,nCards:v}):i.a.createElement("div",{className:"gridContainer",style:{gridTemplateColumns:"repeat(".concat(c,",auto")}},N))},E=function(e){var t=e.nRows,n=e.setNRows,a=e.nCols,r=e.setNCols,c=e.userName,s=e.setUserName,o=e.setInputFormSubmitted;return i.a.createElement("form",{id:"inputForm",onSubmit:function(e){e.preventDefault(),a*t%2===0&&""!==c?o(!0):alert("Input cards need to be even and username needs to be specified!")}},i.a.createElement("div",null,i.a.createElement("input",{className:"inputField",placeholder:"# rows",type:"text",value:t||"",onChange:function(e){n(Number(e.target.value))}})),i.a.createElement("div",null,i.a.createElement("input",{className:"inputField",placeholder:"# columns",type:"text",value:a||"",onChange:function(e){r(Number(e.target.value))}})),i.a.createElement("div",null,i.a.createElement("input",{className:"inputField",placeholder:"Username",type:"text",value:c,onChange:function(e){s(e.target.value)}})),i.a.createElement("div",null,i.a.createElement("input",{id:"submitButton",type:"submit",value:"Start game"})))},N=function(e){var t=e.setInputFormSubmitted,n=e.setGameInitialized,a=e.setNRows,r=e.setNCols,c=e.setUserName;return i.a.createElement("button",{id:"restartButton",onClick:function(){t(!1),n(!1),a(0),r(0),c("")}},"Restart")},g=function(e){var t=e.time;return i.a.createElement("div",null,0!==t&&i.a.createElement("h1",null,"Elapsed seconds: ",t))};s.a.render(i.a.createElement((function(){var e=Object(r.useState)(0),t=Object(a.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(0),o=Object(a.a)(s,2),l=o[0],u=o[1],m=Object(r.useState)(""),d=Object(a.a)(m,2),f=d[0],v=d[1],h=Object(r.useState)(!1),p=Object(a.a)(h,2),C=p[0],O=p[1],T=Object(r.useState)(!1),I=Object(a.a)(T,2),j=I[0],R=I[1],k=Object(r.useState)(null),S=Object(a.a)(k,2),w=S[0],y=S[1],D=Object(r.useState)(0),z=Object(a.a)(D,2),B=z[0],F=z[1];return i.a.createElement("div",{id:"wrapper"},i.a.createElement("div",{id:"header"},i.a.createElement(N,{setInputFormSubmitted:O,setGameInitialized:R,setNRows:c,setNCols:u,setUserName:v}),i.a.createElement(g,{time:B})),i.a.createElement("div",{id:"body"},C?i.a.createElement(b,{dc:w,setDC:y,nRows:n,nCols:l,userName:f,gameInitialized:j,setGameInitialized:R,time:B,setTime:F}):i.a.createElement(E,{nRows:n,setNRows:c,nCols:l,setNCols:u,userName:f,setUserName:v,setInputFormSubmitted:O})),i.a.createElement("div",{id:"footer"}))}),null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.b99df7f9.chunk.js.map